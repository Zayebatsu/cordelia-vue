/*!
 *   Cordelia color picker
 *   version: 1.0.1
 *    author: Cevad Tokatli <cevadtokatli@hotmail.com>
 *   website: http://cevadtokatli.com
 *    github: https://github.com/cevadtokatli/cordelia-vue
 *   license: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Cordelia=e()}(this,function(){"use strict";var B="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=(function(t,e){t.exports=function(){function c(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,e=void 0,i=void 0,n=function(t,e){d[o]=t,d[o+1]=e,2===(o+=2)&&(i?i(p):k())},t="undefined"!=typeof window?window:void 0,a=t||{},s=a.MutationObserver||a.WebKitMutationObserver,l="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(p,1)}}var d=new Array(1e3);function p(){for(var t=0;t<o;t+=2){var e=d[t],r=d[t+1];e(r),d[t]=void 0,d[t+1]=void 0}o=0}var C,g,f,v,k=void 0;function m(t,e){var r=this,o=new this.constructor(w);void 0===o[y]&&$(o);var i=r._state;if(i){var a=arguments[i-1];n(function(){return x(i,o,a,r._result)})}else S(r,o,t,e);return o}function b(t){if(t&&"object"===(void 0===t?"undefined":T(t))&&t.constructor===this)return t;var e=new this(w);return M(e,t),e}l?k=function(){return process.nextTick(p)}:s?(g=0,f=new s(p),v=document.createTextNode(""),f.observe(v,{characterData:!0}),k=function(){v.data=g=++g%2}):u?((C=new MessageChannel).port1.onmessage=p,k=function(){return C.port2.postMessage(0)}):k=void 0===t?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:h()}catch(t){return h()}}():h();var y=Math.random().toString(36).substring(2);function w(){}var _=void 0,P=1,V=2,A={error:null};function D(t){try{return t.then}catch(t){return A.error=t,A}}function R(t,e,r){var o,i,a,s;e.constructor===t.constructor&&r===m&&e.constructor.resolve===b?(a=t,(s=e)._state===P?j(a,s._result):s._state===V?F(a,s._result):S(s,void 0,function(t){return M(a,t)},function(t){return F(a,t)})):r===A?(F(t,A.error),A.error=null):void 0===r?j(t,e):c(r)?(o=e,i=r,n(function(e){var r=!1,t=function(t,e,r,o){try{t.call(e,r,o)}catch(t){return t}}(i,o,function(t){r||(r=!0,o!==t?M(e,t):j(e,t))},function(t){r||(r=!0,F(e,t))},e._label);!r&&t&&(r=!0,F(e,t))},t)):j(t,e)}function M(t,e){var r,o;t===e?F(t,new TypeError("You cannot resolve a promise with itself")):(o=void 0===(r=e)?"undefined":T(r),null===r||"object"!==o&&"function"!==o?j(t,e):R(t,e,D(e)))}function E(t){t._onerror&&t._onerror(t._result),O(t)}function j(t,e){t._state===_&&(t._result=e,t._state=P,0!==t._subscribers.length&&n(O,t))}function F(t,e){t._state===_&&(t._state=V,t._result=e,n(E,t))}function S(t,e,r,o){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+P]=r,i[a+V]=o,0===a&&t._state&&n(O,t)}function O(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var o=void 0,i=void 0,a=t._result,s=0;s<e.length;s+=3)o=e[s],i=e[s+r],o?x(r,o,i,a):i(a);t._subscribers.length=0}}function x(t,e,r,o){var i=c(r),a=void 0,s=void 0,n=void 0,l=void 0;if(i){if((a=function(t,e){try{return t(e)}catch(t){return A.error=t,A}}(r,o))===A?(l=!0,s=a.error,a.error=null):n=!0,e===a)return void F(e,new TypeError("A promises callback cannot return that same promise."))}else a=o,n=!0;e._state!==_||(i&&n?M(e,a):l?F(e,s):t===P?j(e,a):t===V&&F(e,a))}var I=0;function $(t){t[y]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[y]||$(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&j(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===_&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,o=r.resolve;if(o===b){var i=D(e);if(i===m&&e._state!==_)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===L){var a=new r(w);R(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},t.prototype._settledAt=function(t,e,r){var o=this.promise;o._state===_&&(this._remaining--,t===V?F(o,r):this._result[e]=r),0===this._remaining&&j(o,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;S(t,void 0,function(t){return r._settledAt(P,e,t)},function(t){return r._settledAt(V,e,t)})},t}(),L=function(){function e(t){this[y]=I++,this._result=this._state=void 0,this._subscribers=[],w!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){M(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},e}();return L.prototype.then=m,L.all=function(t){return new U(this,t).promise},L.race=function(i){var a=this;return r(i)?new a(function(t,e){for(var r=i.length,o=0;o<r;o++)a.resolve(i[o]).then(t,e)}):new a(function(t,e){return e(new TypeError("You must pass an array to race."))})},L.resolve=b,L.reject=function(t){var e=new this(w);return F(e,t),e},L._setScheduler=function(t){i=t},L._setAsap=function(t){n=t},L._asap=n,L.polyfill=function(){var t=void 0;if(void 0!==B)t=B;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=L},L.Promise=L}()}(t={exports:{}},t.exports),t.exports),r=Object.freeze({default:e,__moduleExports:e}),o=((r&&e||r).polyfill(),{methods:{rgbTohex:function(t){return("#"+("0"+parseInt(t.r,10).toString(16)).slice(-2)+("0"+parseInt(t.g,10).toString(16)).slice(-2)+("0"+parseInt(t.b,10).toString(16)).slice(-2)).toUpperCase()},rgbTohsl:function(t){var e=t.r/255,r=t.g/255,o=t.b/255,i=Math.max(e,r,o),a=Math.min(e,r,o),s=(i+a)/2,n=0,l=0;return i!=a&&(n=s<.5?(i-a)/(i+a):(i-a)/(2-i-a),l=e==i?(r-o)/(i-a):r==i?2+(o-e)/(i-a):4+(e-r)/(i-a)),s=Math.round(100*s),n=Math.round(100*n),(l=Math.round(60*l))<0&&(l+=360),{h:l,s:n,l:s}}}}),i={props:["init","color","rgbaColor","isDark","pickerUpdate","picker"],data:function(){return{dragger:{left:0,top:0}}},watch:{init:function(){this.setPosition()},color:function(){this.pickerUpdate&&this.setPosition()}},methods:{pickerClicked:function(t,e){this.$emit("pickerClicked",t,e)}}};return{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.embed?r("transition",{on:{enter:e.containerEnter,leave:e.containerLeave}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pickerOpen,expression:"pickerOpen"}],ref:"container",staticClass:"cdp-container",attrs:{"cdp-size":e.size_}},[r("div",{ref:"rgbaColor",staticClass:"cdp-hidden"}),e._v(" "),r("PickerContainer",{attrs:{color:e.color_,rgbaColor:e.rgbaColor,isDark:e.isDarkCurrent,pickerUpdate:e.pickerUpdate,majorPicker:e.majorPicker,minorPicker:e.minorPicker,opacityPicker:e.opacityPicker,pickerStyle:e.pickerStyle,allowOpacity:e.allowOpacity,getRgbaValue:e.getRgbaValue,setColor:e.setColor}}),e._v(" "),e.showColorValue||e.allowClearColor||e.showButtons?r("Console",{attrs:{color:e.color_,rgbaColor:e.rgbaColor,initialColor:e.initialColor,isDarkCurrent:e.isDarkCurrent,isDarkInitial:e.isDarkInitial,inputUpdate:e.inputUpdate,showColorValue:e.showColorValue,allowClearColor:e.allowClearColor,showButtons:e.showButtons,getRgbaValue:e.getRgbaValue,convertColor:e.convertColor,setColor:e.setColor,clearColor:e.clearColor,setInitialColorAsColor:e.setInitialColorAsColor,save:e.save,cancel:e.cancel}}):e._e(),e._v(" "),e.showPalette?r("Arrow",{on:{togglePalette:function(t){e.paletteOpen=!e.paletteOpen}}}):e._e(),e._v(" "),r("transition",{on:{enter:e.paletteEnter,leave:e.paletteLeave}},[e.showPalette?r("Palette",{directives:[{name:"show",rawName:"v-show",value:e.paletteOpen,expression:"paletteOpen"}],attrs:{paletteColors:e.paletteColors,allowPaletteAddColor:e.allowPaletteAddColor,color:e.color_,rgbaColor:e.rgbaColor,getRgbaValue:e.getRgbaValue,setColor:e.setColor}}):e._e()],1)],1)]):r("div",{ref:"main",staticClass:"cdp-wrapper cdp-background-type-opacity",on:{click:e.openPicker}},[r("div",{staticClass:"cdp-wrapper-overlay",style:{background:e.color_}},[r("transition",{on:{enter:e.containerEnter,leave:e.containerLeave}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pickerOpen,expression:"pickerOpen"}],ref:"container",staticClass:"cdp-container",class:{"cdp-right":e.pickerPosition.right,"cdp-bottom":e.pickerPosition.bottom},attrs:{"cdp-size":e.size_}},[r("div",{ref:"rgbaColor",staticClass:"cdp-hidden"}),e._v(" "),r("PickerContainer",{attrs:{color:e.color_,rgbaColor:e.rgbaColor,isDark:e.isDarkCurrent,pickerUpdate:e.pickerUpdate,majorPicker:e.majorPicker,minorPicker:e.minorPicker,opacityPicker:e.opacityPicker,pickerStyle:e.pickerStyle,allowOpacity:e.allowOpacity,getRgbaValue:e.getRgbaValue,setColor:e.setColor}}),e._v(" "),e.showColorValue||e.allowClearColor||e.showButtons?r("Console",{attrs:{color:e.color_,rgbaColor:e.rgbaColor,initialColor:e.initialColor,isDarkCurrent:e.isDarkCurrent,isDarkInitial:e.isDarkInitial,inputUpdate:e.inputUpdate,showColorValue:e.showColorValue,allowClearColor:e.allowClearColor,showButtons:e.showButtons,getRgbaValue:e.getRgbaValue,convertColor:e.convertColor,setColor:e.setColor,clearColor:e.clearColor,setInitialColorAsColor:e.setInitialColorAsColor,save:e.save,cancel:e.cancel}}):e._e(),e._v(" "),e.showPalette?r("Arrow",{on:{togglePalette:function(t){e.paletteOpen=!e.paletteOpen}}}):e._e(),e._v(" "),r("transition",{on:{enter:e.paletteEnter,leave:e.paletteLeave}},[e.showPalette?r("Palette",{directives:[{name:"show",rawName:"v-show",value:e.paletteOpen,expression:"paletteOpen"}],attrs:{paletteColors:e.paletteColors,allowPaletteAddColor:e.allowPaletteAddColor,color:e.color_,rgbaColor:e.rgbaColor,getRgbaValue:e.getRgbaValue,setColor:e.setColor}}):e._e()],1)],1)])],1)])},staticRenderFns:[],name:"Cordelia",mixins:[o,{methods:{isDark:function(t){var e=t.r,r=t.g,o=t.b;return 125<Math.round((299*e+587*r+114*o)/1e3)},opacityAnimation:function(c,u){return new Promise(function(a){var s=c.getAttribute("style")?c.getAttribute("style").replace(/opacity[^;]+;?/g,""):null,n=null,l=100;u?(c.classList.remove("cdp-hidden"),c.style.opacity=0):c.style.opacity=1,window.requestAnimationFrame(function t(e){n||(n=e||new Date.getTime);var r=e-n,o=r/l;if(o=Math.min(o,1),r<l){var i=o;u||(i=Math.abs(o-1)),c.style.opacity=i,window.requestAnimationFrame(t)}else u||c.classList.add("cdp-hidden"),c.setAttribute("style",s),a()})})}}}],components:{PickerContainer:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-picker-container"},[r("MajorPicker",{ref:"majorPicker",attrs:{init:t.init,color:t.color,rgbaColor:t.rgbaColor,hslColor:t.hslColor,isDark:t.isDark,pickerUpdate:t.pickerUpdate,picker:t.majorPicker,pickerStyle:t.pickerStyle},on:{pickerClicked:t.pickerClicked}}),t._v(" "),r("MinorPicker",{ref:"minorPicker",attrs:{init:t.init,color:t.color,rgbaColor:t.rgbaColor,hslColor:t.hslColor,isDark:t.isDark,pickerUpdate:t.pickerUpdate,picker:t.minorPicker,pickerStyle:t.pickerStyle},on:{pickerClicked:t.pickerClicked}}),t._v(" "),t.allowOpacity?r("OpacityPicker",{ref:"opacityPicker",attrs:{init:t.init,color:t.color,rgbaColor:t.rgbaColor,isDark:t.isDark,pickerUpdate:t.pickerUpdate,picker:t.opacityPicker},on:{pickerClicked:t.pickerClicked}}):t._e()],1)},staticRenderFns:[],name:"PickerContainer",mixins:[o],props:["color","rgbaColor","isDark","pickerUpdate","majorPicker","minorPicker","opacityPicker","pickerStyle","allowOpacity","getRgbaValue","setColor"],components:{MajorPicker:{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"container",staticClass:"cdp-major-picker",on:{mousedown:function(t){return e.pickerClicked(t,"major")},touchstart:function(t){return e.pickerClicked(t,"major")}}},[0==e.pickerStyle?r("div",{staticClass:"cdp-major-picker-gradient cdp-background-type-current-color",style:{background:"hsl("+e.hslColor.h+", 100%, 50%)"}},[r("div",{staticClass:"cdp-major-picker-gradient cdp-gradient-type-lr-white"},[r("div",{staticClass:"cdp-major-picker-gradient cdp-gradient-type-bt-black cdp-last-gradient-child"},[r("div",{ref:"dragger",staticClass:"cdp-major-dragger",class:{"cdp-dark":e.isDark},style:{left:e.dragger.left+"px",top:e.dragger.top+"px"}})])])]):r("div",{staticClass:"cdp-major-picker-gradient cdp-gradient-type-lr-colorful"},[r("div",{staticClass:"cdp-major-picker-gradient cdp-gradient-type-bt-gray cdp-last-gradient-child"},[r("div",{ref:"dragger",staticClass:"cdp-major-dragger",style:{left:e.dragger.left+"px",top:e.dragger.top+"px"}})])])])},staticRenderFns:[],name:"MajorPicker",mixins:[i],props:["hslColor","pickerStyle"],methods:{setPosition:function(){if(this.color)if(0==this.pickerStyle)var t=this.rgbaColor,e=t.r,r=t.g,o=t.b,i=this.picker.height,a=Math.max(e,r,o),s=Math.abs(Math.round(i/255*a-i)),n=Math.min(e,r,o),l=(p=Math.abs(Math.round(i/255*n-i))-Math.abs(Math.round(s/a*n)))-this.picker.subtractedValue,c=s-this.picker.subtractedValue;else{var u=this.hslColor,h=u.h,d=u.s,p=(u.l,i=this.picker.height,Math.round(i/360*h));s=Math.abs(Math.round(i/100*d-i)),l=p-this.picker.subtractedValue,c=s-this.picker.subtractedValue}else{var C=-1*this.picker.subtractedValue;l=C,c=C}this.dragger={left:l,top:c}}}},MinorPicker:{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"container",staticClass:"cdp-minor-picker",on:{mousedown:function(t){return e.pickerClicked(t,"minor")},touchstart:function(t){return e.pickerClicked(t,"minor")}}},[0==e.pickerStyle?r("div",{staticClass:"cdp-minor-picker-gradient cdp-gradient-type-tb-colorful cdp-last-gradient-child"},[r("div",{ref:"dragger",staticClass:"cdp-minor-dragger",style:{left:e.dragger.left+"px",top:e.dragger.top+"px"}})]):r("div",{staticClass:"cdp-minor-picker-gradient cdp-gradient-type-bt-white-current-color-black cdp-last-gradient-child",style:e.style},[r("div",{ref:"dragger",staticClass:"cdp-minor-dragger",class:{"cdp-dark":e.isDark},style:{left:e.dragger.left+"px",top:e.dragger.top+"px"}})])])},staticRenderFns:[],name:"MinorPicker",mixins:[i],props:["hslColor","pickerStyle"],computed:{style:function(){var t,e;return this.color?(t=this.hslColor.h,e=this.hslColor.s):(t=0,e=100),{background:"linear-gradient(to bottom, hsl(0, 100%, 100%), hsl("+t+", "+e+"%, 50%), hsl(0, 0%, 0%))"}}},methods:{setPosition:function(){var t=(this.picker.width-2*this.picker.subtractedValue)/2;if(this.color)if(0==this.pickerStyle)var e=Math.round(this.picker.height/360*this.hslColor.h)-this.picker.subtractedValue;else{var r=this.picker.height;e=Math.abs(Math.round(r/100*this.hslColor.l-r))-this.picker.subtractedValue}else e=-1*this.picker.subtractedValue;this.dragger={left:t,top:e}}}},OpacityPicker:{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"container",staticClass:"cdp-opacity-picker",on:{mousedown:function(t){return e.pickerClicked(t,"opacity")},touchstart:function(t){return e.pickerClicked(t,"opacity")}}},[r("div",{staticClass:"cdp-opacity-picker-gradient cdp-background-type-opacity"},[r("div",{staticClass:"cdp-opacity-picker-gradient cdp-gradient-type-bt-current-color cdp-last-gradient-child",style:{background:"linear-gradient(to top, rgba("+e.rgbaColor.r+", "+e.rgbaColor.g+", "+e.rgbaColor.b+", 1), rgba("+e.rgbaColor.r+", "+e.rgbaColor.g+", "+e.rgbaColor.b+", 0))"}},[r("div",{ref:"dragger",staticClass:"cdp-opacity-dragger",class:{"cdp-dark":e.isDark||e.rgbaColor.a<.25},style:{left:e.dragger.left+"px",top:e.dragger.top+"px"}})])])])},staticRenderFns:[],name:"OpacityPicker",mixins:[i],methods:{setPosition:function(){var t,e=(this.picker.width-2*this.picker.subtractedValue)/2;t=this.color?Math.round(this.picker.height/100*(100*this.rgbaColor.a))-this.picker.subtractedValue:this.picker.height-this.picker.subtractedValue,this.dragger={left:e,top:t}}}}},data:function(){return{init:!1,rgbColor:{},hslColor:{},dragStatus:null}},watch:{color:function(){this.pickerUpdate&&this.setRgbHslValue()}},mounted:function(){this.setRgbHslValue(),this.init=!0},methods:{setRgbHslValue:function(){this.color?(this.hslColor=this.rgbTohsl(this.rgbaColor),this.rgbColor=this.getRgbaValue("hsl("+this.hslColor.h+", 100%, 50%)")):(this.rgbColor={r:255,g:0,b:0},this.hslColor={h:0,s:0,l:0})},pickerClicked:function(t,e){if(this.dragStatus=e,document.body.classList.add("cdp-dragging-active"),0!=this.pickerStyle||"minor"==e||this.color){if(1==this.pickerStyle&&"major"!=e&&!this.color){r=this.$refs.majorPicker.$refs.dragger;this.setColorWithPosition({x:r.offsetLeft+this.majorPicker.subtractedValue,y:r.offsetTop+this.majorPicker.subtractedValue},"major")}}else{var r=this.$refs.minorPicker.$refs.dragger;this.setColorWithPosition({x:r.offsetLeft+this.minorPicker.subtractedValue,y:r.offsetTop+this.minorPicker.subtractedValue},"minor")}this.pickerMoved(t),this.toggleDraggerListeners(!0)},pickerMoved:function(t){var e;e="major"==this.dragStatus?this.newPosition(t,this.$refs.majorPicker):"minor"==this.dragStatus?this.newPosition(t,this.$refs.minorPicker):this.newPosition(t,this.$refs.opacityPicker),this.setColorWithPosition(e,this.dragStatus,!0),t.preventDefault()},newPosition:function(t,e){var r=e.picker,o=e.$refs.container.getBoundingClientRect(),i=t.clientX?t.clientX:t.pageX-window.pageXOffset,a=t.clientY?t.clientY:t.pageY-window.pageYOffset,s=i-(o.left+r.subtractedValue),n=a-(o.top+r.subtractedValue);return s<-r.subtractedValue?s=-r.subtractedValue:s>r.width-r.subtractedValue&&(s=r.width-r.subtractedValue),n<-r.subtractedValue?n=-r.subtractedValue:n>r.height-r.subtractedValue&&(n=r.height-r.subtractedValue),e.dragger={left:s,top:n},{x:s+r.subtractedValue,y:n+r.subtractedValue}},setColorWithPosition:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=this.rgbColor;if("major"==e)if(0==this.pickerStyle){o=[o.r,o.g,o.b];for(var i,a,s,n=this.majorPicker.height,l=0;l<o.length;l++){var c=o[l];255==c?s=Math.abs(Math.round(255/n*t.y-255)):(i=Math.round((n-t.y)*(c/n)),a=Math.round((n-t.x)*((255-c)/n)),s=i+Math.abs(Math.round((n-t.y)*(a/n)))),o[l]=s}var u={r:o[0],g:o[1],b:o[2],a:this.rgbaColor.a};this.setColor(u,!1,!0,r)}else{n=this.majorPicker.height;var h=Math.round(t.x*(360/n)),d=Math.abs(Math.round(t.y*(100/n))-100);this.hslColor.h=h,this.hslColor.s=d;var p=(g=this.$refs.minorPicker.$refs.dragger).offsetLeft+this.minorPicker.subtractedValue,C=g.offsetTop+this.minorPicker.subtractedValue;this.setColorWithPosition({x:p,y:C},"minor",r)}else if("minor"==e)if(0==this.pickerStyle){n=this.minorPicker.height,h=Math.round(t.y*(360/n));o=this.getRgbaValue("hsl("+h+", 100%, 50%)"),this.rgbColor=o,this.hslColor.h=h;var g,f=(g=this.$refs.majorPicker.$refs.dragger).offsetLeft+this.majorPicker.subtractedValue,v=g.offsetTop+this.majorPicker.subtractedValue;this.setColorWithPosition({x:f,y:v},"major",r)}else{n=this.minorPicker.height;var k=Math.abs(Math.round(t.y*(100/n))-100);u=this.getRgbaValue("hsl("+this.hslColor.h+", "+this.hslColor.s+"%, "+k+"%)");this.hslColor.l=k,u.a=this.rgbaColor.a,this.setColor(u,!1,!0,r)}else if("opacity"==e){var m=this.rgbaColor,b=m.r,y=m.g,w=m.b;n=this.opacityPicker.height,u={r:b,g:y,b:w,a:Math.round(100/n*t.y)/100};this.setColor(u,!1,!0,r)}},pickerReleased:function(){document.body.classList.remove("cdp-dragging-active"),this.toggleDraggerListeners(!1)},toggleDraggerListeners:function(t){t?(document.addEventListener("mousemove",this.pickerMoved),document.addEventListener("touchmove",this.pickerMoved),document.addEventListener("mouseup",this.pickerReleased),document.addEventListener("touchend",this.pickerReleased)):(document.removeEventListener("mousemove",this.pickerMoved),document.removeEventListener("touchmove",this.pickerMoved),document.removeEventListener("mouseup",this.pickerReleased),document.removeEventListener("touchend",this.pickerReleased))}}},Console:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-console-container",class:[t.showColorValue||t.allowClearColor?t.showColorValue?t.allowClearColor?"":"cdp-clear-color-non-showing":"cdp-current-color-non-showing":"cdp-color-console-non-showing"]},[t.showColorValue||t.allowClearColor?r("ColorConsole",{attrs:{color:t.color,rgbaColor:t.rgbaColor,initialColor:t.initialColor,isDarkCurrent:t.isDarkCurrent,isDarkInitial:t.isDarkInitial,inputUpdate:t.inputUpdate,showColorValue:t.showColorValue,allowClearColor:t.allowClearColor,getRgbaValue:t.getRgbaValue,convertColor:t.convertColor,setColor:t.setColor,clearColor:t.clearColor,setInitialColorAsColor:t.setInitialColorAsColor}}):t._e(),t._v(" "),t.showButtons?r("Buttons",{attrs:{save:t.save,cancel:t.cancel}}):t._e()],1)},staticRenderFns:[],name:"Console",props:["color","rgbaColor","initialColor","isDarkCurrent","isDarkInitial","inputUpdate","showColorValue","allowClearColor","showButtons","getRgbaValue","convertColor","setColor","clearColor","setInitialColorAsColor","save","cancel"],components:{ColorConsole:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-color-console-container cdp-background-type-opacity"},[r("InitialColor",{attrs:{color:t.initialColor,isDark:t.isDarkInitial,setInitialColorAsColor:t.setInitialColorAsColor}}),t._v(" "),r("CurrentColorConsole",{attrs:{color:t.color,rgbaColor:t.rgbaColor,isDark:t.isDarkCurrent,inputUpdate:t.inputUpdate,showColorValue:t.showColorValue,allowClearColor:t.allowClearColor,getRgbaValue:t.getRgbaValue,convertColor:t.convertColor,setColor:t.setColor,clearColor:t.clearColor}})],1)},staticRenderFns:[],name:"ColorConsole",props:["color","rgbaColor","initialColor","isDarkCurrent","isDarkInitial","inputUpdate","showColorValue","allowClearColor","getRgbaValue","convertColor","setColor","clearColor","setInitialColorAsColor"],components:{InitialColor:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-initial-color",class:{"cdp-dark":t.isDark},style:{background:t.color},on:{click:t.setInitialColorAsColor}},[r("i",{staticClass:"cdp-icons"})])},staticRenderFns:[],name:"InitialColor",props:["color","isDark","setInitialColorAsColor"]},CurrentColorConsole:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-current-color-console",style:t.style},[t.showColorValue?r("ColorInput",{attrs:{color:t.color,rgbaColor:t.rgbaColor,isDark:t.isDark,inputUpdate:t.inputUpdate,getRgbaValue:t.getRgbaValue,convertColor:t.convertColor,setColor:t.setColor}}):t._e(),t._v(" "),t.allowClearColor?r("ClearColor",{attrs:{rgbaColor:t.rgbaColor,isDark:t.isDark,clearColor:t.clearColor}}):t._e()],1)},staticRenderFns:[],name:"CurrentColorConsole",props:["color","rgbaColor","isDark","inputUpdate","showColorValue","allowClearColor","getRgbaValue","convertColor","setColor","clearColor"],components:{ColorInput:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.color_,expression:"color_"}],staticClass:"cdp-current-color",class:{"cdp-dark":e.isDark||e.rgbaColor.a<.4},attrs:{type:"text",spellCheck:"false"},domProps:{value:e.color_},on:{change:e.change,input:function(t){t.target.composing||(e.color_=t.target.value)}}})},staticRenderFns:[],name:"ColorInput",props:["color","rgbaColor","isDark","inputUpdate","getRgbaValue","convertColor","setColor"],data:function(){return{color_:this.color}},watch:{color:function(){this.inputUpdate&&(this.color_=this.color)}},methods:{change:function(t){if(t.target.value.trim()){var e=this.getRgbaValue(t.target.value);this.setColor(e,!0,!1)}}}},ClearColor:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-clear-color",class:{"cdp-dark":t.isDark||t.rgbaColor.a<.4},on:{click:t.clearColor}},[r("i",{staticClass:"cdp-icons"})])},staticRenderFns:[],name:"ClearColor",props:["rgbaColor","isDark","clearColor"]}},computed:{style:function(){return{background:this.color?this.color:"transparent"}}}}}},Buttons:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-button-container"},[r("div",{staticClass:"cdp-button",attrs:{"cdp-function":"save"},on:{click:t.save}},[r("i",{staticClass:"cdp-icons"}),t._v(" SAVE ")]),t._v(" "),r("div",{staticClass:"cdp-button",attrs:{"cdp-function":"cancel"},on:{click:t.cancel}},[r("i",{staticClass:"cdp-icons"}),t._v(" CANCEL ")])])},staticRenderFns:[],name:"Buttons",props:["save","cancel"]}}},Arrow:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cdp-arrow-div"},[e("i",{staticClass:"cdp-icons",on:{click:this.togglePalette}})])},staticRenderFns:[],name:"Arrow",methods:{togglePalette:function(){this.$emit("togglePalette")}}},Palette:{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cdp-palette-container"},[r("hr",{staticClass:"cdp-palette-line"}),t._v(" "),r("PaletteColors",{attrs:{paletteColors:t.paletteColors,allowPaletteAddColor:t.allowPaletteAddColor,color:t.color,rgbaColor:t.rgbaColor,getRgbaValue:t.getRgbaValue,setColor:t.setColor}})],1)},staticRenderFns:[],name:"Palette",props:["paletteColors","allowPaletteAddColor","color","rgbaColor","getRgbaValue","setColor"],components:{PaletteColors:{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cdp-palette"},[e.allowPaletteAddColor?r("PaletteAddColor",{attrs:{addColor:e.addColor}}):e._e(),e._v(" "),e._l(e.paletteColors_,function(t){return r("PaletteColor",{key:t.value,attrs:{color:t,setColor:e.setColor}})})],2)},staticRenderFns:[],name:"PaletteColors",props:["paletteColors","allowPaletteAddColor","color","rgbaColor","getRgbaValue","setColor"],components:{PaletteAddColor:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cdp-palette-add-element",on:{click:this.addColor}},[e("i",{staticClass:"cdp-icons"})])},staticRenderFns:[],name:"PaletteAddColor",props:["addColor"]},PaletteColor:{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cdp-palette-element cdp-background-type-opacity",on:{click:function(t){e.setColor(e.rgba,!0,!0)}}},[r("div",{style:{background:e.color.value}})])},staticRenderFns:[],name:"PaletteColor",props:["color","setColor"],computed:{rgba:function(){var t=this.color;return{r:t.r,g:t.g,b:t.b,a:t.a}}}}},data:function(){return{paletteColors_:[]}},mounted:function(){var n=this;this.paletteColors.forEach(function(t){var e=n.getRgbaValue(t),r=e.r,o=e.g,i=e.b,a=e.a,s="rgba("+r+", "+o+", "+i+", "+a+")";n.paletteColors_.push({value:s,r:r,g:o,b:i,a:a})})},methods:{addColor:function(){if(this.color){var t=this.rgbaColor,e=t.r,r=t.g,o=t.b,i=t.a,a="rgba("+e+", "+r+", "+o+", "+i+")";this.paletteColors_.find(function(t){return t.value==a})||this.paletteColors_.push({value:a,r:e,g:r,b:o,a:i})}}}}}}},props:{size:{type:String,default:"medium"},embed:{type:Boolean,default:!0},pickerStyle:{type:Number,default:0},allowOpacity:{type:Boolean,default:!0},allowClearColor:{type:Boolean,default:!1},showColorValue:{type:Boolean,default:!0},colorFormat:{type:String,default:"hex"},color:{type:String,default:"#FF0000"},showButtons:{type:Boolean,default:!0},showPalette:{type:Boolean,default:!0},paletteColors:{type:Array,default:function(){return["#FFFFB5","#FBBD87","#F45151","#7AEA89","#91C8E7","#8EB4E6","#B0A7F1"]}},allowPaletteAddColor:{type:Boolean,default:!0},onOpen:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},onSave:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},onChanged:{type:Function,default:function(){}}},data:function(){return{size_:this.size,color_:this.color,initialColor:null,isDarkCurrent:!1,isDarkInitial:!1,pickerUpdate:!0,inputUpdate:!0,rgbaColor:{},majorPicker:{},minorPicker:{},opacityPicker:{},pickerOpen:!!this.embed,animationProcessing:!1,pickerPosition:{right:!1,bottom:!1},paletteOpen:!1}},created:function(){this.init()},methods:{init:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&!this.embed&&(this.size_="small"),"small"==this.size_?(this.majorPicker.width=125,this.majorPicker.height=125,this.minorPicker.width=20,this.minorPicker.height=125):"medium"==this.size_?(this.majorPicker.width=175,this.majorPicker.height=175,this.minorPicker.width=30,this.minorPicker.height=175):(this.majorPicker.width=250,this.majorPicker.height=250,this.minorPicker.width=30,this.minorPicker.height=250),this.majorPicker.subtractedValue=9,this.minorPicker.subtractedValue=7,this.allowOpacity&&(this.opacityPicker.width=this.minorPicker.width,this.opacityPicker.height=this.minorPicker.height,this.opacityPicker.subtractedValue=this.minorPicker.subtractedValue),this.color_||this.allowClearColor||("hex"==this.colorFormat?this.color_="#FF0000":"rgb"==this.colorFormat?this.color_="rgb(255,0,0)":"rgba"==this.colorFormat?this.color_="rgba(255,0,0,1)":"hsl"==this.colorFormat?this.color_="hsl(0,100%,50%)":"hsla"==this.colorFormat&&(this.color_="hsla(0,100%,50%,1)"));var t,e={};if(this.color_){var r=document.createElement("div");r.style.display="none",document.body.appendChild(r),e=this.getRgbaValue(this.color_,r),document.body.removeChild(r),this.color_=this.convertColor(e).value,t=this.isDark(e)}else e={r:255,g:255,b:255,a:1},t=!0;this.rgbaColor=e,this.initialColor=this.color_,this.isDarkCurrent=t,this.isDarkInitial=e.a<.4||t},getRgbaValue:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.$refs.rgbaColor;e.style.background=t;var r=window.getComputedStyle(e,!1,null).getPropertyValue("background-color").replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");return r={r:parseInt(r[0]),g:parseInt(r[1]),b:parseInt(r[2]),a:r[3]?parseFloat(r[3]):1}},convertColor:function(t){var e=t.r,r=t.g,o=t.b,i=t.a;if(1!=i&&this.allowOpacity){if("hsl"!=this.colorFormat&&"hsla"!=this.colorFormat)return{value:"rgba("+e+", "+r+", "+o+", "+i+")",r:e,g:r,b:o,a:i};var a=this.rgbTohsl({r:e,g:r,b:o});return{value:"hsla("+(n=a.h)+", "+(l=a.s)+"%, "+(c=a.l)+"%, "+i+")",h:n,s:l,l:c,a:i}}if("hex"==this.colorFormat)return{value:this.rgbTohex({r:e,g:r,b:o})};if("rgb"==this.colorFormat)return{value:"rgb("+e+", "+r+", "+o+")",r:e,g:r,b:o};if("rgba"==this.colorFormat)return{value:"rgba("+e+", "+r+", "+o+", 1)",r:e,g:r,b:o,a:1};var s=this.rgbTohsl({r:e,g:r,b:o}),n=s.h,l=s.s,c=s.l;return"hsl"==this.colorFormat?{value:"hsl("+n+", "+l+"%, "+c+"%)",h:n,s:l,l:c}:{value:"hsla("+n+", "+l+"%, "+c+"%, 1)",h:n,s:l,l:c,a:1}},setColor:function(t,e,r){var o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=this.convertColor(t);this.color_!=i.value&&(this.color_=i.value,this.rgbaColor=t,this.isDarkCurrent=this.isDark(t),this.pickerUpdate=e,this.inputUpdate=r,o&&this.onChanged())},clearColor:function(){this.color_&&(this.color_=null,this.rgbaColor={r:255,g:255,b:255,a:1},this.isDarkCurrent=!0,this.pickerUpdate=!0,this.inputUpdate=!0,this.onChanged())},setInitialColorAsColor:function(){if(this.color_!=this.initialColor)if(this.initialColor){var t=this.getRgbaValue(this.initialColor);this.setColor(t,!0,!0)}else this.clearColor()},openPicker:function(){this.pickerOpen||this.animationProcessing||(this.animationProcessing=!0,this.pickerOpen=!0)},closePicker:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];(t&&!this.$refs.container.contains(t.target)||e)&&!this.animationProcessing&&(this.animationProcessing=!0,this.embed||(window.removeEventListener("resize",this.setPosition,!0),this.showButtons||(document.removeEventListener("mousedown",this.closePicker,!0),document.removeEventListener("touchstart",this.closePicker,!0))),this.onClose(),this.pickerOpen=!1)},setPosition:function(){var t=this.$refs.main.getBoundingClientRect(),e=t.left+window.pageXOffset,r=t.top+window.pageYOffset,o=e+this.$refs.container.offsetWidth+10,i=e-this.$refs.container.offsetWidth,a=r+this.$refs.container.offsetHeight+40,s=r-(this.$refs.container.offsetHeight+10),n=!1,l=!1;window.innerWidth+window.pageXOffset<=o&&0<i&&(n=!0),window.innerHeight+window.pageYOffset<=a&&0<s&&(l=!0),this.pickerPosition={right:n,bottom:l}},containerEnter:function(t,e){var r=this;this.embed||(t.classList.add("cdp-visibility-hidden"),this.setPosition(),t.classList.remove("cdp-visibility-hidden"),window.addEventListener("resize",this.setPosition,!0),this.showButtons||(document.addEventListener("mousedown",this.closePicker,!0),document.addEventListener("touchstart",this.closePicker,!0))),this.onOpen(),this.opacityAnimation(t,!0).then(function(){r.animationProcessing=!1,e()})},containerLeave:function(t,e){var r=this;this.opacityAnimation(t,!1).then(function(){r.animationProcessing=!1,e()})},paletteEnter:function(t,e){this.opacityAnimation(t,!0).then(e)},paletteLeave:function(t,e){this.opacityAnimation(t,!1).then(e)},get:function(){return this.color_?this.convertColor(this.rgbaColor):{value:null}},set:function(t){if(!t&&this.allowClearColor)this.clearColor();else if(t){var e=this.getRgbaValue(t);this.setColor(e,!0,!0)}else t=this.color_},show:function(){this.openPicker()},hide:function(){this.pickerOpen&&this.closePicker(null,!0)},save:function(){this.initialColor=this.color_,this.isDarkInitial=this.rgbaColor.a<.4||this.isDarkCurrent,this.embed||this.hide(),this.onSave()},cancel:function(){this.setInitialColorAsColor(),this.embed||this.hide(),this.onCancel()}}}});